import{c as n,I as ye,d as le,f as se,g as re,M as Ae,m as Se,r as _,h as ie,K as pe,H as oe,z as Oe,i as g,o as s,a as d,b,j as l,u as t,s as h,q as i,y as I,F as E,e as $,X as K,k as z,_ as ue,J as de,Q as Te,$ as te,Y as Me,Z as Ee,a0 as Re,x as Ce,a1 as Ne,W as ge,P as fe,w as Je,v as Ve,n as He,t as ze,U as he,V as je}from"./index-BWyvaJGd.js";import{R as _e}from"./RouterLocationAvatar-DV68NB4O.js";import{A as De}from"./ApiOutlined-BdJAwXEL.js";import{S as Ue}from"./SendOutlined-C2CtP_Tp.js";import{N as Le}from"./NodeIndexOutlined-B_mopQRy.js";var Fe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-260 72h96v209.9L621.5 312 572 347.4V136zm220 752H232V136h280v296.9c0 3.3 1 6.6 3 9.3a15.9 15.9 0 0022.3 3.7l83.8-59.9 81.4 59.4c2.7 2 6 3.1 9.4 3.1 8.8 0 16-7.2 16-16V136h64v752z"}}]},name:"book",theme:"outlined"};function we(P){for(var e=1;e<arguments.length;e++){var f=arguments[e]!=null?Object(arguments[e]):{},v=Object.keys(f);typeof Object.getOwnPropertySymbols=="function"&&(v=v.concat(Object.getOwnPropertySymbols(f).filter(function(p){return Object.getOwnPropertyDescriptor(f,p).enumerable}))),v.forEach(function(p){Be(P,p,f[p])})}return P}function Be(P,e,f){return e in P?Object.defineProperty(P,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):P[e]=f,P}var ke=function(e,f){var v=we({},e,f.attrs);return n(ye,we({},v,{icon:Fe}),null)};ke.displayName="BookOutlined";ke.inheritAttrs=!1;var Ye={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM544 472c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v108H372c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h108v108c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h108c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V472z"}}]},name:"file-add",theme:"outlined"};function Pe(P){for(var e=1;e<arguments.length;e++){var f=arguments[e]!=null?Object(arguments[e]):{},v=Object.keys(f);typeof Object.getOwnPropertySymbols=="function"&&(v=v.concat(Object.getOwnPropertySymbols(f).filter(function(p){return Object.getOwnPropertyDescriptor(f,p).enumerable}))),v.forEach(function(p){We(P,p,f[p])})}return P}function We(P,e,f){return e in P?Object.defineProperty(P,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):P[e]=f,P}var be=function(e,f){var v=Pe({},e,f.attrs);return n(ye,Pe({},v,{icon:Ye}),null)};be.displayName="FileAddOutlined";be.inheritAttrs=!1;var qe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"};function Ie(P){for(var e=1;e<arguments.length;e++){var f=arguments[e]!=null?Object(arguments[e]):{},v=Object.keys(f);typeof Object.getOwnPropertySymbols=="function"&&(v=v.concat(Object.getOwnPropertySymbols(f).filter(function(p){return Object.getOwnPropertyDescriptor(f,p).enumerable}))),v.forEach(function(p){Ge(P,p,f[p])})}return P}function Ge(P,e,f){return e in P?Object.defineProperty(P,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):P[e]=f,P}var xe=function(e,f){var v=Ie({},e,f.attrs);return n(ye,Ie({},v,{icon:qe}),null)};xe.displayName="SettingOutlined";xe.inheritAttrs=!1;const Xe={class:"buttons"},Ze={key:0,class:"avatar-container"},Ke={class:"node small-text"},Qe={key:1,class:"small-text"},ea={key:2},aa={key:0,class:"small-text"},na={key:0,class:"small-text"},ta={key:0,class:"small-text"},oa={key:6},la=["onClick"],sa={class:"detail"},ia={key:0},ua={key:1},ra={key:2},pa={key:3},ca={key:4},da={key:5},va=["innerHTML"],ma=["innerHTML"],ga=le({__name:"mySessions",setup(P){const e=se().t,f=re(),v=new Ae;v.use(Se,{attrs:{target:"_blank"}});const p=_(!1),S=_([]),M=_([]),A=async()=>{try{p.value=!0;let a=await z(e,"/list/routers");if(a.success&&a.response){const r=a.response;r&&Array.isArray(r.routers)&&(M.value=r.routers.sort((w,U)=>(""+w.name).localeCompare(U.name)),localStorage.setItem("routers",JSON.stringify(M.value)))}if(a=await z(e,"/session",{action:"enum"}),a.success&&a.response){const r=a.response,w=[];r&&Array.isArray(r.sessions)&&(r.sessions.forEach(U=>w.push({...U,routerJoined:M.value.find(q=>q.uuid===U.router)})),S.value=w)}}catch(a){console.error(a)}finally{p.value=!1}};ie(async()=>{if(!pe.value){oe.info(e("pages.nodes.pleaseSignIn")),f.replace({path:"/signin"});return}await A()});const k=_(!1),C=async(a,r)=>{try{p.value=!0,await z(e,"/session",{action:r,router:a.router,session:a.uuid})}catch(w){console.error(w)}finally{p.value=!1,A()}},u=a=>C(a,"enable"),L=a=>C(a,"disable"),Y=a=>C(a,"delete"),c=_(!1),o=_(""),m=_(""),J=_(""),W=_(""),G=_(""),V=_(""),N=_(""),j=_(""),D=_(""),ee=_(void 0),F=async(a,r)=>{var w,U,q,Z;r.stopPropagation();try{o.value="",m.value="",J.value="",W.value="",G.value="",N.value="",D.value="",ee.value=void 0,ee.value=a.routerJoined||void 0,o.value=((w=a.routerJoined)==null?void 0:w.name)||e("pages.manage.session.info"),m.value=((U=a.routerJoined)==null?void 0:U.ipv4)||"",J.value=((q=a.routerJoined)==null?void 0:q.ipv6)||"",W.value=((Z=a.routerJoined)==null?void 0:Z.ipv6LinkLocal)||"",D.value=a.endpoint,N.value=a.interface,j.value="",a.extensions.forEach((T,B)=>{B!==0&&(j.value+=", "),j.value+=e(`pages.peering['${T}']`)}),G.value=a.data!==""&&a.data.info?v.render(a.data.info):""}catch(T){console.error(T)}k.value=!0;try{c.value=!0;const T=await z(e,"/session",{action:"query",router:a.router,session:a.uuid});if(T.success&&T.response){const B=T.response;typeof B=="string"&&(V.value=B===""?"":v.render(B))}}catch(T){console.error(T)}finally{c.value=!1}},ne=_([{title:e("pages.manage.session.node"),dataIndex:"node",key:"node",sorter:(a,r)=>{var w,U;return(""+(((w=a.routerJoined)==null?void 0:w.name)||"")).localeCompare(((U=r.routerJoined)==null?void 0:U.name)||"")}},{title:e("pages.manage.session.type"),dataIndex:"type",key:"type",sorter:(a,r)=>(""+a.type).localeCompare(r.type)},{title:"IPv4",dataIndex:"ipv4",key:"ipv4",sorter:(a,r)=>(""+(a.ipv4||"")).localeCompare(r.ipv4||"")},{title:"IPv6",dataIndex:"ipv6",key:"ipv6",sorter:(a,r)=>(""+(a.ipv6||"")).localeCompare(r.ipv6||"")},{title:"IPv6 Link Local",dataIndex:"ipv6LinkLocal",key:"ipv6LinkLocal",sorter:(a,r)=>(""+(a.ipv6LinkLocal||"")).localeCompare(r.ipv6LinkLocal||"")},{title:e("pages.manage.session.status"),dataIndex:"status",key:"status",sorter:(a,r)=>a.status-r.status},{title:e("pages.manage.session.action"),dataIndex:"action",key:"action"}]),R=()=>{f.push({path:"/nodes"})},Q=(a,r)=>({onClick:w=>F(a,w)}),X=a=>a.stopPropagation(),y=_(""),H=Oe(()=>y.value.length===0?S.value:S.value.filter(a=>a.ipv4!==void 0&&a.ipv4!==null&&a.ipv4.indexOf(y.value)!==-1||a.ipv6!==void 0&&a.ipv6!==null&&a.ipv6.indexOf(y.value)!==-1||a.ipv6LinkLocal!==void 0&&a.ipv6LinkLocal!==null&&a.ipv6LinkLocal.indexOf(y.value)!==-1));return(a,r)=>{const w=g("a-button"),U=g("a-input-search"),q=g("a-tag"),Z=g("a-divider"),T=g("a-popconfirm"),B=g("a-table"),ve=g("a-spin"),me=g("a-modal");return s(),d(E,null,[b("div",Xe,[n(w,{onClick:R},{icon:l(()=>[n(t(De))]),default:l(()=>[h(" "+i(t(e)("pages.manage.session.newPeeringSession")),1)]),_:1}),n(U,{value:y.value,"onUpdate:value":r[0]||(r[0]=O=>y.value=O),placeholder:t(e)("pages.manage.session.search"),class:"searchBox","enter-button":""},null,8,["value","placeholder"])]),n(B,{columns:ne.value,"data-source":H.value,loading:p.value,bordered:"",size:"small",customRow:Q,scroll:{x:"max-content"}},{bodyCell:l(({column:O,record:x})=>{var ce;return[O.key==="node"?(s(),d("div",Ze,[n(_e,{router:x.routerJoined,"hide-peering-dot":!0},null,8,["router"]),b("span",Ke,i((ce=x.routerJoined)==null?void 0:ce.name),1)])):I("",!0),O.key==="type"?(s(),d("span",Qe,i(t(e)(`pages.peering['${x.type}']`)),1)):O.key==="status"?(s(),d("span",ea,[n(q,{color:x.status===-1?"volcano":x.status===0?"geekblue":"green"},{default:l(()=>[h(i(t(e)(`pages.manage.session.statusCode['${x.status}']`)),1)]),_:2},1032,["color"])])):O.key==="ipv4"?(s(),d(E,{key:3},[x.ipv4?(s(),d("span",aa,i(x.ipv4),1)):(s(),$(t(K),{key:1}))],64)):O.key==="ipv6"?(s(),d(E,{key:4},[x.ipv6?(s(),d("span",na,i(x.ipv6),1)):(s(),$(t(K),{key:1}))],64)):O.key==="ipv6LinkLocal"?(s(),d(E,{key:5},[x.ipv6LinkLocal?(s(),d("span",ta,i(x.ipv6LinkLocal),1)):(s(),$(t(K),{key:1}))],64)):O.key==="action"?(s(),d("span",oa,[b("a",{onClick:ae=>F(x,ae)},i(t(e)("pages.manage.session.info")),9,la),n(Z,{type:"vertical"}),x.status===1?(s(),$(T,{key:0,placement:"bottomRight",onConfirm:ae=>L(x)},{title:l(()=>[b("p",null,i(t(e)("pages.manage.session.areYouSure")),1)]),default:l(()=>[b("a",{onClick:X},i(t(e)("pages.manage.session.disable")),1)]),_:2},1032,["onConfirm"])):x.status===0?(s(),$(T,{key:1,placement:"bottomRight",onConfirm:ae=>u(x)},{title:l(()=>[b("p",null,i(t(e)("pages.manage.session.areYouSure")),1)]),default:l(()=>[b("a",{onClick:X},i(t(e)("pages.manage.session.enable")),1)]),_:2},1032,["onConfirm"])):I("",!0),x.status===1||x.status===0?(s(),$(Z,{key:2,type:"vertical"})):I("",!0),n(T,{placement:"bottomRight",onConfirm:ae=>Y(x)},{title:l(()=>[b("p",null,i(t(e)("pages.manage.session.areYouSure")),1)]),default:l(()=>[b("a",{onClick:X},i(t(e)("pages.manage.session.remove")),1)]),_:2},1032,["onConfirm"])])):I("",!0)]}),_:1},8,["columns","data-source","loading"]),n(me,{open:k.value,"onUpdate:open":r[2]||(r[2]=O=>k.value=O),title:o.value,centered:""},{footer:l(()=>[n(w,{type:"primary",onClick:r[1]||(r[1]=O=>k.value=!1)},{default:l(()=>[h(i(t(e)("pages.manage.session.ok")),1)]),_:1})]),default:l(()=>[b("ul",sa,[m.value!==""?(s(),d("li",ia,[r[3]||(r[3]=h("IPv4: ")),b("code",null,i(m.value),1)])):I("",!0),J.value!==""?(s(),d("li",ua,[r[4]||(r[4]=h("IPv6: ")),b("code",null,i(J.value),1)])):I("",!0),W.value!==""?(s(),d("li",ra,[r[5]||(r[5]=h("IPv6 Link Local: ")),b("code",null,i(W.value),1)])):I("",!0),N.value!==""?(s(),d("li",pa,[h(i(t(e)("pages.peering.interface"))+": ",1),b("code",null,i(N.value),1)])):I("",!0),D.value?(s(),d("li",ca,[h(i(t(e)("pages.peering.endpoint"))+": ",1),b("code",null,i(D.value),1)])):I("",!0),j.value!==""?(s(),d("li",da,[h(i(t(e)("pages.peering.bgpExtensions"))+": ",1),b("code",null,i(j.value),1)])):I("",!0)]),G.value!==""?(s(),d("div",{key:0,class:"desc",innerHTML:G.value},null,8,va)):I("",!0),n(ve,{spinning:c.value},{default:l(()=>[V.value!==""?(s(),d("div",{key:0,class:"desc",innerHTML:V.value},null,8,ma)):I("",!0)]),_:1},8,["spinning"])]),_:1},8,["open","title"])],64)}}}),fa=ue(ga,[["__scopeId","data-v-fd5cfc03"]]),ya=["value"],_a=le({__name:"myAccount",setup(P){const e=se().t,f=re(),v=_(!1),p=_("");ie(async()=>{if(!pe.value){oe.info(e("pages.nodes.pleaseSignIn")),f.replace({path:"/signin"});return}p.value=localStorage.getItem("asn")||""});const S=_({password:"",confirmPassword:""}),M=async()=>{if(S.value.password!==S.value.confirmPassword){de.error({centered:!0,title:e("pages.manage.account.setPassword"),content:e("pages.peering.inputValid")});return}try{v.value=!0;const A=await z(e,"/settings",{action:"password",password:S.value.password});if(A.success&&A.response){const k=A.response;if(k&&k.success){oe.success(e("pages.manage.account.successSetPassword"));return}}de.error({centered:!0,title:e("pages.manage.account.setPassword"),content:e("pages.signIn.errorOccurred")})}catch(A){console.error(A)}finally{v.value=!1}};return(A,k)=>{const C=g("a-form-item"),u=g("a-input-password"),L=g("a-button"),Y=g("a-form"),c=g("a-spin");return s(),$(c,{spinning:v.value},{default:l(()=>[b("h2",null,i(t(e)("pages.manage.account.setYourPassword")),1),n(Y,{model:S.value,class:"setPasswordForm"},{default:l(()=>[n(C,{style:{display:"none"}},{default:l(()=>[b("input",{type:"text",name:"username",value:p.value,autocomplete:"username"},null,8,ya)]),_:1}),n(C,{name:"password",label:t(e)("pages.manage.account.password")},{default:l(()=>[n(u,{autocomplete:"new-password",value:S.value.password,"onUpdate:value":k[0]||(k[0]=o=>S.value.password=o),placeholder:t(e)("pages.manage.account.password")},null,8,["value","placeholder"])]),_:1},8,["label"]),n(C,{name:"confirmPassword",label:t(e)("pages.manage.account.confirmPassword")},{default:l(()=>[n(u,{autocomplete:"new-password",value:S.value.confirmPassword,"onUpdate:value":k[1]||(k[1]=o=>S.value.confirmPassword=o),placeholder:t(e)("pages.manage.account.confirmPassword")},null,8,["value","placeholder"])]),_:1},8,["label"]),k[2]||(k[2]=b("br",null,null,-1)),n(C,{"wrapper-col":{offset:8,span:16}},{default:l(()=>[n(L,{type:"primary",onClick:M},{icon:l(()=>[n(t(Ue))]),default:l(()=>[h(" "+i(t(e)("pages.manage.account.setPassword")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])}}}),$e=ue(_a,[["__scopeId","data-v-c32ef565"]]),ka={key:0,class:"avatar-container"},ba={class:"node small-text"},xa={key:1,class:"small-text"},Ca={key:2,class:"small-text"},ha={key:3},La={key:0,class:"small-text"},wa={key:0,class:"small-text"},Pa={key:0,class:"small-text"},Ia={key:7},$a=["onClick"],Aa={class:"detail"},Sa={key:0},Oa={key:1},Na={key:2},Ua={key:3},Ta={key:4},Ma={key:5},Ea=["innerHTML"],Ra=["innerHTML"],Ja=le({__name:"manageSessions",setup(P){const e=se().t,f=re(),v=new Ae;v.use(Se,{attrs:{target:"_blank"}});const p=_(!1),S=_([]),M=_([]),A=async()=>{try{p.value=!0;let a=await z(e,"/list/routers");if(a.success&&a.response){const r=a.response;r&&Array.isArray(r.routers)&&(M.value=r.routers.sort((w,U)=>(""+w.name).localeCompare(U.name)),localStorage.setItem("routers",JSON.stringify(M.value)))}if(a=await z(e,"/admin",{action:"enumSessions"}),a.success&&a.response){const r=a.response,w=[];r&&Array.isArray(r.sessions)&&(r.sessions.forEach(U=>w.push({...U,routerJoined:M.value.find(q=>q.uuid===U.router)})),S.value=w)}}catch(a){console.error(a)}finally{p.value=!1}};ie(async()=>{if(!pe.value){oe.info(e("pages.nodes.pleaseSignIn")),f.replace({path:"/signin"});return}await A()});const k=_(!1),C=async(a,r)=>{try{p.value=!0,await z(e,"/admin",{action:r,router:a.router,session:a.uuid})}catch(w){console.error(w)}finally{p.value=!1,A()}},u=a=>C(a,"enableSession"),L=a=>C(a,"disableSession"),Y=a=>C(a,"deleteSession"),c=a=>C(a,"approveSession"),o=_(!1),m=_(""),J=_(""),W=_(""),G=_(""),V=_(""),N=_(""),j=_(""),D=_(""),ee=_(""),F=_(void 0),ne=async(a,r)=>{var w,U,q,Z;r.stopPropagation();try{m.value="",J.value="",W.value="",G.value="",V.value="",j.value="",ee.value="",F.value=void 0,F.value=a.routerJoined||void 0,m.value=((w=a.routerJoined)==null?void 0:w.name)||e("pages.manage.session.info"),J.value=((U=a.routerJoined)==null?void 0:U.ipv4)||"",W.value=((q=a.routerJoined)==null?void 0:q.ipv6)||"",G.value=((Z=a.routerJoined)==null?void 0:Z.ipv6LinkLocal)||"",ee.value=a.endpoint,j.value=a.interface,D.value="",a.extensions.forEach((T,B)=>{B!==0&&(D.value+=", "),D.value+=e(`pages.peering['${T}']`)}),V.value=a.data!==""&&a.data.info?v.render(a.data.info):""}catch(T){console.error(T)}k.value=!0;try{o.value=!0;const T=await z(e,"/admin",{action:"querySession",router:a.router,session:a.uuid});if(T.success&&T.response){const B=T.response;typeof B=="string"&&(N.value=B===""?"":v.render(B))}}catch(T){console.error(T)}finally{o.value=!1}},R=_([{title:e("pages.manage.session.node"),dataIndex:"node",key:"node",sorter:(a,r)=>{var w,U;return(""+(((w=a.routerJoined)==null?void 0:w.name)||"")).localeCompare(((U=r.routerJoined)==null?void 0:U.name)||"")}},{title:"ASN",dataIndex:"asn",key:"asn",sorter:(a,r)=>Number(a.asn)>Number(r.asn)},{title:e("pages.manage.session.type"),dataIndex:"type",key:"type",sorter:(a,r)=>(""+a.type).localeCompare(r.type)},{title:"IPv4",dataIndex:"ipv4",key:"ipv4",sorter:(a,r)=>(""+(a.ipv4||"")).localeCompare(r.ipv4||"")},{title:"IPv6",dataIndex:"ipv6",key:"ipv6",sorter:(a,r)=>(""+(a.ipv6||"")).localeCompare(r.ipv6||"")},{title:"IPv6 Link Local",dataIndex:"ipv6LinkLocal",key:"ipv6LinkLocal",sorter:(a,r)=>(""+(a.ipv6LinkLocal||"")).localeCompare(r.ipv6LinkLocal||"")},{title:e("pages.manage.session.status"),dataIndex:"status",key:"status",sorter:(a,r)=>a.status-r.status},{title:e("pages.manage.session.action"),dataIndex:"action",key:"action"}]),Q=(a,r)=>({onClick:w=>ne(a,w)}),X=a=>a.stopPropagation(),y=_(""),H=Oe(()=>y.value.length===0?S.value:S.value.filter(a=>a.asn!==void 0&&a.asn!==null&&a.asn.indexOf(y.value)!==-1||a.ipv4!==void 0&&a.ipv4!==null&&a.ipv4.indexOf(y.value)!==-1||a.ipv6!==void 0&&a.ipv6!==null&&a.ipv6.indexOf(y.value)!==-1||a.ipv6LinkLocal!==void 0&&a.ipv6LinkLocal!==null&&a.ipv6LinkLocal.indexOf(y.value)!==-1));return(a,r)=>{const w=g("a-input-search"),U=g("a-tag"),q=g("a-divider"),Z=g("a-popconfirm"),T=g("a-table"),B=g("a-spin"),ve=g("a-button"),me=g("a-modal");return s(),d(E,null,[n(w,{value:y.value,"onUpdate:value":r[0]||(r[0]=O=>y.value=O),placeholder:t(e)("pages.manage.session.search"),class:"searchBox","enter-button":""},null,8,["value","placeholder"]),n(T,{columns:R.value,"data-source":H.value,loading:p.value,bordered:"",size:"small",customRow:Q,scroll:{x:"max-content"}},{bodyCell:l(({column:O,record:x})=>{var ce;return[O.key==="node"?(s(),d("div",ka,[n(_e,{router:x.routerJoined,"hide-peering-dot":!0},null,8,["router"]),b("span",ba,i((ce=x.routerJoined)==null?void 0:ce.name),1)])):O.key==="asn"?(s(),d("span",xa,i(x.asn),1)):I("",!0),O.key==="type"?(s(),d("span",Ca,i(t(e)(`pages.peering['${x.type}']`)),1)):O.key==="status"?(s(),d("span",ha,[n(U,{color:x.status===-1?"volcano":x.status===0?"geekblue":"green"},{default:l(()=>[h(i(t(e)(`pages.manage.session.statusCode['${x.status}']`)),1)]),_:2},1032,["color"])])):O.key==="ipv4"?(s(),d(E,{key:4},[x.ipv4?(s(),d("span",La,i(x.ipv4),1)):(s(),$(t(K),{key:1}))],64)):O.key==="ipv6"?(s(),d(E,{key:5},[x.ipv6?(s(),d("span",wa,i(x.ipv6),1)):(s(),$(t(K),{key:1}))],64)):O.key==="ipv6LinkLocal"?(s(),d(E,{key:6},[x.ipv6LinkLocal?(s(),d("span",Pa,i(x.ipv6LinkLocal),1)):(s(),$(t(K),{key:1}))],64)):O.key==="action"?(s(),d("span",Ia,[b("a",{onClick:ae=>ne(x,ae)},i(t(e)("pages.manage.session.info")),9,$a),n(q,{type:"vertical"}),x.status===1?(s(),$(Z,{key:0,placement:"bottomRight",onConfirm:ae=>L(x)},{title:l(()=>[b("p",null,i(t(e)("pages.manage.session.areYouSure")),1)]),default:l(()=>[b("a",{onClick:X},i(t(e)("pages.manage.session.disable")),1)]),_:2},1032,["onConfirm"])):x.status===0?(s(),$(Z,{key:1,placement:"bottomRight",onConfirm:ae=>u(x)},{title:l(()=>[b("p",null,i(t(e)("pages.manage.session.areYouSure")),1)]),default:l(()=>[b("a",{onClick:X},i(t(e)("pages.manage.session.enable")),1)]),_:2},1032,["onConfirm"])):x.status===-1?(s(),$(Z,{key:2,placement:"bottomRight",onConfirm:ae=>c(x)},{title:l(()=>[b("p",null,i(t(e)("pages.manage.session.areYouSure")),1)]),default:l(()=>[b("a",{onClick:X},i(t(e)("pages.manage.session.approve")),1)]),_:2},1032,["onConfirm"])):I("",!0),n(q,{type:"vertical"}),n(Z,{placement:"bottomRight",onConfirm:ae=>Y(x)},{title:l(()=>[b("p",null,i(t(e)("pages.manage.session.areYouSure")),1)]),default:l(()=>[b("a",{onClick:X},i(t(e)("pages.manage.session.remove")),1)]),_:2},1032,["onConfirm"])])):I("",!0)]}),_:1},8,["columns","data-source","loading"]),n(me,{open:k.value,"onUpdate:open":r[2]||(r[2]=O=>k.value=O),title:m.value,centered:""},{footer:l(()=>[n(ve,{type:"primary",onClick:r[1]||(r[1]=O=>k.value=!1)},{default:l(()=>[h(i(t(e)("pages.manage.session.ok")),1)]),_:1})]),default:l(()=>[b("ul",Aa,[J.value!==""?(s(),d("li",Sa,[r[3]||(r[3]=h("IPv4: ")),b("code",null,i(J.value),1)])):I("",!0),W.value!==""?(s(),d("li",Oa,[r[4]||(r[4]=h("IPv6: ")),b("code",null,i(W.value),1)])):I("",!0),G.value!==""?(s(),d("li",Na,[r[5]||(r[5]=h("IPv6 Link Local: ")),b("code",null,i(G.value),1)])):I("",!0),j.value!==""?(s(),d("li",Ua,[h(i(t(e)("pages.peering.interface"))+": ",1),b("code",null,i(j.value),1)])):I("",!0),ee.value?(s(),d("li",Ta,[h(i(t(e)("pages.peering.endpoint"))+": ",1),b("code",null,i(ee.value),1)])):I("",!0),D.value!==""?(s(),d("li",Ma,[h(i(t(e)("pages.peering.bgpExtensions"))+": ",1),b("code",null,i(D.value),1)])):I("",!0)]),V.value!==""?(s(),d("div",{key:0,class:"desc",innerHTML:V.value},null,8,Ea)):I("",!0),n(B,{spinning:o.value},{default:l(()=>[N.value!==""?(s(),d("div",{key:0,class:"desc",innerHTML:N.value},null,8,Ra)):I("",!0)]),_:1},8,["spinning"])]),_:1},8,["open","title"])],64)}}}),Va=ue(Ja,[["__scopeId","data-v-72d02bd9"]]),Ha=le({__name:"manageConfig",setup(P){const e=se().t,f=re(),v=_(!1),p=_({...Te.value});ie(async()=>{if(!pe.value){oe.info(e("pages.nodes.pleaseSignIn")),f.replace({path:"/signin"});return}});const S=async()=>{if(te(p.value.netAsn)||te(p.value.netName)||isNaN(Number(p.value.netAsn))||Number(p.value.netAsn)<Me||Number(p.value.netAsn)>Ee){de.error({centered:!0,title:e("pages.manage.config.changeConfig"),content:e("pages.peering.inputValid")});return}try{v.value=!0,await z(e,"/admin",{action:"config",netAsn:p.value.netAsn,netName:p.value.netName,netDesc:p.value.netDesc||null,footerText:p.value.footerText||null,maintenanceText:p.value.maintenanceText||null})}catch(M){console.error(M)}finally{await Re(e),v.value=!1}};return(M,A)=>{const k=g("a-input"),C=g("a-form-item"),u=g("a-textarea"),L=g("a-button"),Y=g("a-form"),c=g("a-spin");return s(),$(c,{spinning:v.value},{default:l(()=>[b("h2",null,i(t(e)("pages.manage.config.changeConfig")),1),n(Y,{model:p.value,class:"configForm"},{default:l(()=>[n(C,{name:"netAsn",label:t(e)("pages.manage.config.netAsn")},{default:l(()=>[n(k,{value:p.value.netAsn,"onUpdate:value":A[0]||(A[0]=o=>p.value.netAsn=o),type:"number","addon-before":"AS",placeholder:"424242〇〇〇〇"},null,8,["value"])]),_:1},8,["label"]),n(C,{name:"netName",label:t(e)("pages.manage.config.netName")},{default:l(()=>[n(k,{value:p.value.netName,"onUpdate:value":A[1]||(A[1]=o=>p.value.netName=o),placeholder:t(e)("pages.manage.config.netName")},null,8,["value","placeholder"])]),_:1},8,["label"]),n(C,{name:"netDesc",label:t(e)("pages.manage.config.netDesc")},{default:l(()=>[n(u,{"auto-size":"",value:p.value.netDesc,"onUpdate:value":A[2]||(A[2]=o=>p.value.netDesc=o),placeholder:t(e)("pages.manage.config.netDesc")},null,8,["value","placeholder"])]),_:1},8,["label"]),n(C,{name:"footerText",label:t(e)("pages.manage.config.footerText")},{default:l(()=>[n(u,{"auto-size":"",value:p.value.footerText,"onUpdate:value":A[3]||(A[3]=o=>p.value.footerText=o),placeholder:t(e)("pages.manage.config.footerText")},null,8,["value","placeholder"])]),_:1},8,["label"]),n(C,{name:"maintenanceText",label:t(e)("pages.manage.config.maintenanceText")},{default:l(()=>[n(u,{"auto-size":"",value:p.value.maintenanceText,"onUpdate:value":A[4]||(A[4]=o=>p.value.maintenanceText=o),placeholder:t(e)("pages.manage.config.maintenanceText")},null,8,["value","placeholder"])]),_:1},8,["label"]),A[5]||(A[5]=b("br",null,null,-1)),n(C,{"wrapper-col":{offset:8,span:16}},{default:l(()=>[n(L,{type:"primary",onClick:S},{icon:l(()=>[n(t(Ue))]),default:l(()=>[h(" "+i(t(e)("pages.manage.config.save")),1)]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["spinning"])}}}),za=ue(Ha,[["__scopeId","data-v-518807ce"]]),ja={class:"buttons"},Da={key:0},Fa={key:1},Ba={key:2},Ya=["onClick"],Wa=["onClick"],qa=le({__name:"managePosts",setup(P){const e=se().t,f=re(),v=_(!1),p=_([]),S=async()=>{try{v.value=!0;const o=await z(e,"/list/posts");if(o.success&&o.response){const m=o.response;m&&Array.isArray(m.posts)&&(p.value=m.posts)}}catch(o){console.error(o)}finally{v.value=!1}};ie(async()=>{if(!pe.value){oe.info(e("pages.nodes.pleaseSignIn")),f.replace({path:"/signin"});return}await S()});const M=_([{title:e("pages.manage.posts.title"),dataIndex:"title",key:"title",sorter:(o,m)=>(""+(o.title||"")).localeCompare(m.title||"")},{title:e("pages.manage.posts.category"),dataIndex:"category",key:"category",sorter:(o,m)=>(""+(o.category||"")).localeCompare(m.category||"")},{title:e("pages.manage.posts.createdAt"),dataIndex:"createdAt",key:"createdAt",sorter:(o,m)=>(""+o.createdAt).localeCompare(m.createdAt)},{title:e("pages.manage.posts.updatedAt"),dataIndex:"updatedAt",key:"updatedAt",sorter:(o,m)=>(""+o.updatedAt).localeCompare(m.updatedAt)},{title:e("pages.manage.session.action"),dataIndex:"action",key:"action"}]),A=o=>{window.open(`/post/${o.postId}`)},k=async o=>{try{v.value=!0,await z(e,"/admin",{action:"deletePost",postId:o.postId})}catch(m){console.error(m)}finally{v.value=!1,S()}},C=_(!1),u=_(!1),L=_({category:"",title:"",content:"",postId:-1}),Y=async()=>{if(te(L.value.category)||te(L.value.title)||te(L.value.content)){de.error({centered:!0,title:e("pages.manage.posts.addOrEdit"),content:e("pages.peering.inputValid")});return}try{v.value=!0,u.value=!0;const o={action:"setPost",type:L.value.postId!==-1?"update":"add",category:L.value.category,title:L.value.title,content:L.value.content};L.value.postId!==-1&&Object.assign(o,{postId:L.value.postId}),await z(e,"/admin",o)}catch(o){console.error(o)}finally{v.value=!1,u.value=!1,C.value=!1,S()}},c=async o=>{if(C.value=!0,!o)L.value.category="",L.value.title="",L.value.content="",L.value.postId=-1;else{L.value.category=o.category,L.value.title=o.title,L.value.postId=o.postId,L.value.content="";try{u.value=!0;const m=await z(e,`/list/post/${o.postId}`);if(m.success&&m.response){const J=m.response;J&&J.content&&(L.value.content=J.content)}}catch(m){oe.error(e("pages.signIn.errorOccurred")),console.error(m);return}finally{u.value=!1}}};return(o,m)=>{const J=g("a-button"),W=g("a-divider"),G=g("a-popconfirm"),V=g("a-table"),N=g("a-input"),j=g("a-form-item"),D=g("a-textarea"),ee=g("a-form"),F=g("a-spin"),ne=g("a-modal");return s(),d(E,null,[b("div",ja,[n(J,{onClick:m[0]||(m[0]=R=>c())},{icon:l(()=>[n(t(be))]),default:l(()=>[h(" "+i(t(e)("pages.manage.posts.add")),1)]),_:1})]),n(V,{columns:M.value,"data-source":p.value,loading:v.value,bordered:"",size:"small",scroll:{x:"max-content"}},{bodyCell:l(({column:R,record:Q})=>[R.key==="createdAt"?(s(),d("span",Da,i(t(Ce)(Q.createdAt)),1)):I("",!0),R.key==="updatedAt"?(s(),d("span",Fa,i(t(Ce)(Q.updatedAt)),1)):I("",!0),R.key==="action"?(s(),d("span",Ba,[b("a",{onClick:X=>A(Q)},i(t(e)("pages.manage.posts.view")),9,Ya),n(W,{type:"vertical"}),b("a",{onClick:X=>c(Q)},i(t(e)("pages.manage.posts.edit")),9,Wa),n(W,{type:"vertical"}),n(G,{placement:"bottomRight",onConfirm:X=>k(Q)},{title:l(()=>[b("p",null,i(t(e)("pages.manage.session.areYouSure")),1)]),default:l(()=>[b("a",null,i(t(e)("pages.manage.session.remove")),1)]),_:2},1032,["onConfirm"])])):I("",!0)]),_:1},8,["columns","data-source","loading"]),n(ne,{open:C.value,"onUpdate:open":m[6]||(m[6]=R=>C.value=R),title:t(e)("pages.manage.posts.addOrEdit"),centered:""},{footer:l(()=>[n(F,{spinning:u.value},{default:l(()=>[n(J,{style:{"margin-right":"10px"},type:"primary",onClick:m[4]||(m[4]=R=>Y())},{default:l(()=>[h(i(t(e)("pages.manage.config.save")),1)]),_:1}),n(J,{onClick:m[5]||(m[5]=R=>C.value=!1)},{default:l(()=>[h(i(t(e)("pages.manage.posts.close")),1)]),_:1})]),_:1},8,["spinning"])]),default:l(()=>[n(F,{spinning:u.value},{default:l(()=>[n(ee,{model:L.value,class:"modalForm"},{default:l(()=>[n(j,{name:"category",label:t(e)("pages.manage.posts.category")},{default:l(()=>[n(N,{value:L.value.category,"onUpdate:value":m[1]||(m[1]=R=>L.value.category=R),placeholder:t(e)("pages.manage.posts.category")},null,8,["value","placeholder"])]),_:1},8,["label"]),n(j,{name:"title",label:t(e)("pages.manage.posts.title")},{default:l(()=>[n(N,{value:L.value.title,"onUpdate:value":m[2]||(m[2]=R=>L.value.title=R),placeholder:t(e)("pages.manage.posts.title")},null,8,["value","placeholder"])]),_:1},8,["label"]),n(j,{name:"content",label:t(e)("pages.manage.posts.content")},{default:l(()=>[n(D,{rows:8,value:L.value.content,"onUpdate:value":m[3]||(m[3]=R=>L.value.content=R),placeholder:t(e)("pages.manage.posts.content")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["spinning"])]),_:1},8,["open","title"])],64)}}}),Ga=ue(qa,[["__scopeId","data-v-51815a86"]]),Xa={class:"buttons"},Za={key:0,class:"small-text"},Ka={key:0,class:"small-text"},Qa={key:0,class:"small-text"},en={key:7},an=["onClick"],nn=le({__name:"manageNodes",setup(P){const e=se().t,f=re(),v=_(!1),p=_([]),S=async()=>{try{v.value=!0;const c=await z(e,"/admin",{action:"enumRouters"});if(c.success&&c.response){const o=c.response;o&&Array.isArray(o.routers)&&(p.value=o.routers)}}catch(c){console.error(c)}finally{v.value=!1}};ie(async()=>{if(!pe.value){oe.info(e("pages.nodes.pleaseSignIn")),f.replace({path:"/signin"});return}await S()});const M=_([{title:e("pages.manage.nodes.name"),dataIndex:"name",key:"name",sorter:(c,o)=>(""+(c.name||"")).localeCompare(o.name||"")},{title:e("pages.manage.nodes.location"),dataIndex:"location",key:"location",sorter:(c,o)=>(""+(c.location||"")).localeCompare(o.location||"")},{title:e("pages.manage.nodes.public"),dataIndex:"public",key:"public",sorter:(c,o)=>(c.public?1:0)-(o.public?1:0)},{title:e("pages.manage.nodes.openPeering"),dataIndex:"openPeering",key:"openPeering",sorter:(c,o)=>(c.openPeering?1:0)-(o.openPeering?1:0)},{title:e("pages.manage.nodes.autoPeering"),dataIndex:"autoPeering",key:"autoPeering",sorter:(c,o)=>(c.autoPeering?1:0)-(o.autoPeering?1:0)},{title:e("pages.manage.nodes.sessionCapacity"),dataIndex:"sessionCapacity",key:"sessionCapacity",sorter:(c,o)=>c.sessionCapacity-o.sessionCapacity},{title:"IPv4",dataIndex:"ipv4",key:"ipv4",sorter:(c,o)=>(""+(c.ipv4||"")).localeCompare(o.ipv4||"")},{title:"IPv6",dataIndex:"ipv6",key:"ipv6",sorter:(c,o)=>(""+(c.ipv6||"")).localeCompare(o.ipv6||"")},{title:"IPv6 Link Local",dataIndex:"ipv6LinkLocal",key:"ipv6LinkLocal",sorter:(c,o)=>(""+(c.ipv6LinkLocal||"")).localeCompare(o.ipv6LinkLocal||"")},{title:e("pages.manage.session.action"),dataIndex:"action",key:"action"}]),A=async c=>{try{v.value=!0,await z(e,"/admin",{action:"deleteRouter",router:c.uuid})}catch(o){console.error(o)}finally{v.value=!1,S()}},k=_(!1),C=_(!1),u=_({name:"",description:"",location:"",public:!0,openPeering:!0,autoPeering:!0,sessionCapacity:30,callbackUrl:"",ipv4:"",ipv6:"",ipv6LinkLocal:"",linkTypes:["wireguard"],extensions:["mp-bgp","extended-nexthop"],uuid:""}),L=async()=>{if(te(u.value.name)||te(u.value.sessionCapacity)||isNaN(Number(u.value.sessionCapacity))||te(u.value.callbackUrl)||!Array.isArray(u.value.linkTypes)||u.value.linkTypes.length<1){de.error({centered:!0,title:e("pages.manage.nodes.addOrEdit"),content:e("pages.peering.inputValid")});return}try{v.value=!0,C.value=!0;const c={action:"setRouter",type:u.value.uuid!==""?"update":"add",name:u.value.name,description:u.value.description||null,location:u.value.location||null,public:!!u.value.public,openPeering:!!u.value.openPeering,autoPeering:!!u.value.autoPeering,sessionCapacity:Number(u.value.sessionCapacity),callbackUrl:u.value.callbackUrl,ipv4:u.value.ipv4||null,ipv6:u.value.ipv6||null,ipv6LinkLocal:u.value.ipv6LinkLocal||null,linkTypes:u.value.linkTypes,extensions:u.value.extensions};u.value.uuid!==""&&Object.assign(c,{router:u.value.uuid}),await z(e,"/admin",c)}catch(c){console.error(c)}finally{v.value=!1,C.value=!1,k.value=!1,S()}},Y=async c=>{k.value=!0,c?(u.value.name=c.name,u.value.description=c.description,u.value.location=c.location,u.value.public=c.public||!1,u.value.openPeering=c.openPeering,u.value.autoPeering=c.autoPeering,u.value.sessionCapacity=c.sessionCapacity,u.value.callbackUrl=c.callbackUrl||"",u.value.ipv4=c.ipv4,u.value.ipv6=c.ipv6,u.value.ipv6LinkLocal=c.ipv6LinkLocal,u.value.linkTypes=c.linkTypes,u.value.extensions=c.extensions,u.value.uuid=c.uuid):u.value={name:"",description:"",location:"",public:!0,openPeering:!0,autoPeering:!0,sessionCapacity:30,callbackUrl:"",ipv4:"",ipv6:"",ipv6LinkLocal:"",linkTypes:["wireguard"],extensions:["mp-bgp","extended-nexthop"],uuid:""}};return(c,o)=>{const m=g("a-button"),J=g("a-divider"),W=g("a-popconfirm"),G=g("a-table"),V=g("a-input"),N=g("a-form-item"),j=g("a-textarea"),D=g("a-switch"),ee=g("a-input-number"),F=g("a-checkbox"),ne=g("a-checkbox-group"),R=g("a-form"),Q=g("a-spin"),X=g("a-modal");return s(),d(E,null,[b("div",Xa,[n(m,{onClick:o[0]||(o[0]=y=>Y())},{icon:l(()=>[n(t(Ne))]),default:l(()=>[h(" "+i(t(e)("pages.manage.nodes.add")),1)]),_:1})]),n(G,{columns:M.value,"data-source":p.value,loading:v.value,bordered:"",size:"small",scroll:{x:"max-content"}},{bodyCell:l(({column:y,record:H})=>[y.key==="location"?(s(),d(E,{key:0},[H.location?(s(),$(_e,{key:0,router:H,"hide-peering-dot":!0},null,8,["router"])):(s(),$(t(K),{key:1}))],64)):y.key==="ipv4"?(s(),d(E,{key:1},[H.ipv4?(s(),d("span",Za,i(H.ipv4),1)):(s(),$(t(K),{key:1}))],64)):y.key==="ipv6"?(s(),d(E,{key:2},[H.ipv6?(s(),d("span",Ka,i(H.ipv6),1)):(s(),$(t(K),{key:1}))],64)):y.key==="ipv6LinkLocal"?(s(),d(E,{key:3},[H.ipv6LinkLocal?(s(),d("span",Qa,i(H.ipv6LinkLocal),1)):(s(),$(t(K),{key:1}))],64)):y.key==="public"?(s(),d(E,{key:4},[H.public?(s(),$(t(ge),{key:0})):(s(),$(t(K),{key:1}))],64)):y.key==="openPeering"?(s(),d(E,{key:5},[H.openPeering?(s(),$(t(ge),{key:0})):(s(),$(t(K),{key:1}))],64)):y.key==="autoPeering"?(s(),d(E,{key:6},[H.autoPeering?(s(),$(t(ge),{key:0})):(s(),$(t(K),{key:1}))],64)):I("",!0),y.key==="action"?(s(),d("span",en,[b("a",{onClick:a=>Y(H)},i(t(e)("pages.manage.posts.edit")),9,an),n(J,{type:"vertical"}),n(W,{placement:"bottomRight",onConfirm:a=>A(H)},{title:l(()=>[b("p",null,i(t(e)("pages.manage.session.areYouSure")),1)]),default:l(()=>[b("a",null,i(t(e)("pages.manage.session.remove")),1)]),_:2},1032,["onConfirm"])])):I("",!0)]),_:1},8,["columns","data-source","loading"]),n(X,{open:k.value,"onUpdate:open":o[16]||(o[16]=y=>k.value=y),title:t(e)("pages.manage.nodes.addOrEdit"),centered:""},{footer:l(()=>[n(Q,{spinning:C.value},{default:l(()=>[n(m,{style:{"margin-right":"10px"},type:"primary",onClick:o[14]||(o[14]=y=>L())},{default:l(()=>[h(i(t(e)("pages.manage.config.save")),1)]),_:1}),n(m,{onClick:o[15]||(o[15]=y=>k.value=!1)},{default:l(()=>[h(i(t(e)("pages.manage.posts.close")),1)]),_:1})]),_:1},8,["spinning"])]),default:l(()=>[n(Q,{spinning:C.value},{default:l(()=>[n(R,{model:u.value,class:"modalForm"},{default:l(()=>[n(N,{name:"name",label:t(e)("pages.manage.nodes.name")},{default:l(()=>[n(V,{value:u.value.name,"onUpdate:value":o[1]||(o[1]=y=>u.value.name=y),placeholder:t(e)("pages.manage.nodes.name")},null,8,["value","placeholder"])]),_:1},8,["label"]),n(N,{name:"description",label:t(e)("pages.manage.nodes.description")},{default:l(()=>[n(j,{rows:2,value:u.value.description,"onUpdate:value":o[2]||(o[2]=y=>u.value.description=y),placeholder:t(e)("pages.manage.nodes.description")},null,8,["value","placeholder"])]),_:1},8,["label"]),n(N,{name:"location",label:t(e)("pages.manage.nodes.location")},{default:l(()=>[n(V,{value:u.value.location,"onUpdate:value":o[3]||(o[3]=y=>u.value.location=y),placeholder:t(e)("pages.manage.nodes.location")},null,8,["value","placeholder"])]),_:1},8,["label"]),n(N,{name:"public",label:t(e)("pages.manage.nodes.public")},{default:l(()=>[n(D,{checked:u.value.public,"onUpdate:checked":o[4]||(o[4]=y=>u.value.public=y)},null,8,["checked"])]),_:1},8,["label"]),n(N,{name:"openPeering",label:t(e)("pages.manage.nodes.openPeering")},{default:l(()=>[n(D,{checked:u.value.openPeering,"onUpdate:checked":o[5]||(o[5]=y=>u.value.openPeering=y)},null,8,["checked"])]),_:1},8,["label"]),n(N,{name:"autoPeering",label:t(e)("pages.manage.nodes.autoPeering")},{default:l(()=>[n(D,{checked:u.value.autoPeering,"onUpdate:checked":o[6]||(o[6]=y=>u.value.autoPeering=y)},null,8,["checked"])]),_:1},8,["label"]),n(N,{name:"sessionCapacity",label:t(e)("pages.manage.nodes.sessionCapacity")},{default:l(()=>[n(ee,{value:u.value.sessionCapacity,"onUpdate:value":o[7]||(o[7]=y=>u.value.sessionCapacity=y),placeholder:t(e)("pages.manage.nodes.sessionCapacity")},null,8,["value","placeholder"])]),_:1},8,["label"]),n(N,{name:"callbackUrl",label:t(e)("pages.manage.nodes.callbackUrl")},{default:l(()=>[n(V,{value:u.value.callbackUrl,"onUpdate:value":o[8]||(o[8]=y=>u.value.callbackUrl=y),placeholder:t(e)("pages.manage.nodes.callbackUrl")},null,8,["value","placeholder"])]),_:1},8,["label"]),n(N,{name:"ipv4",label:"IPv4"},{default:l(()=>[n(V,{value:u.value.ipv4,"onUpdate:value":o[9]||(o[9]=y=>u.value.ipv4=y)},null,8,["value"])]),_:1}),n(N,{name:"ipv6",label:"IPv6"},{default:l(()=>[n(V,{value:u.value.ipv6,"onUpdate:value":o[10]||(o[10]=y=>u.value.ipv6=y)},null,8,["value"])]),_:1}),n(N,{name:"ipv6LinkLocal",label:"IPv6 Link Local"},{default:l(()=>[n(V,{value:u.value.ipv6LinkLocal,"onUpdate:value":o[11]||(o[11]=y=>u.value.ipv6LinkLocal=y)},null,8,["value"])]),_:1}),n(N,{label:t(e)("pages.peering.linkType")},{default:l(()=>[n(ne,{value:u.value.linkTypes,"onUpdate:value":o[12]||(o[12]=y=>u.value.linkTypes=y)},{default:l(()=>[n(F,{value:"wireguard"},{default:l(()=>[h(i(t(e)("pages.peering['wireguard']")),1)]),_:1}),n(F,{value:"openvpn"},{default:l(()=>[h(i(t(e)("pages.peering['openvpn']")),1)]),_:1}),n(F,{value:"ipsec"},{default:l(()=>[h(i(t(e)("pages.peering['ipsec']")),1)]),_:1}),n(F,{value:"gre"},{default:l(()=>[h(i(t(e)("pages.peering['gre']")),1)]),_:1}),n(F,{value:"direct"},{default:l(()=>[h(i(t(e)("pages.peering['direct']")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),n(N,{label:t(e)("pages.peering.bgpExtensions")},{default:l(()=>[n(ne,{value:u.value.extensions,"onUpdate:value":o[13]||(o[13]=y=>u.value.extensions=y)},{default:l(()=>[n(F,{value:"mp-bgp"},{default:l(()=>[h(i(t(e)("pages.peering['mp-bgp']")),1)]),_:1}),n(F,{value:"extended-nexthop"},{default:l(()=>[h(i(t(e)("pages.peering['extended-nexthop']")),1)]),_:1})]),_:1},8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["spinning"])]),_:1},8,["open","title"])],64)}}}),tn=ue(nn,[["__scopeId","data-v-d9cfd5d2"]]),on={id:"wrapper"},ln={class:"header"},sn=le({__name:"manage",setup(P){const e=se().t,f=_(["mySessions"]),v={mySessions:e("pages.manage.mySessions"),myAccount:e("pages.manage.myAccount"),manageSessions:e("pages.manage.manageSessions"),managePosts:e("pages.manage.managePosts"),manageConfig:e("pages.manage.manageConfig"),manageNodes:e("pages.manage.manageNodes")};ie(async()=>{f.value[0]=fe.value?"manageSessions":"mySessions"});const p=_(!1),S=()=>{p.value=!p.value,window.scrollTo(0,0)},M=()=>{window.scrollTo(0,0),(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<je&&(p.value=!0)};return(A,k)=>{const C=g("a-menu-item"),u=g("a-menu"),L=g("a-layout-sider"),Y=g("a-divider"),c=g("a-layout-content"),o=g("menu-trigger");return s(),d("section",on,[Je(n(L,{class:He(`sider ${t(ze)}`),width:"200",collapsible:"",collapsed:p.value,"onUpdate:collapsed":k[8]||(k[8]=m=>p.value=m),trigger:null,breakpoint:"lg",collapsedWidth:40},{default:l(()=>[n(u,{class:"menu",mode:"inline",selectedKeys:f.value,"onUpdate:selectedKeys":k[7]||(k[7]=m=>f.value=m)},{default:l(()=>[t(fe)?(s(),d(E,{key:1},[n(C,{key:"manageSessions",onClick:k[2]||(k[2]=m=>M())},{icon:l(()=>[n(t(Le))]),default:l(()=>[h(" "+i(v.manageSessions),1)]),_:1}),n(C,{key:"manageNodes",onClick:k[3]||(k[3]=m=>M())},{icon:l(()=>[n(t(Ne))]),default:l(()=>[h(" "+i(v.manageNodes),1)]),_:1}),n(C,{key:"managePosts",onClick:k[4]||(k[4]=m=>M())},{icon:l(()=>[n(t(ke))]),default:l(()=>[h(" "+i(v.managePosts),1)]),_:1}),n(C,{key:"manageConfig",onClick:k[5]||(k[5]=m=>M())},{icon:l(()=>[n(t(xe))]),default:l(()=>[h(" "+i(v.manageConfig),1)]),_:1}),n(C,{key:"myAccount",onClick:k[6]||(k[6]=m=>M())},{icon:l(()=>[n(t(he))]),default:l(()=>[h(" "+i(v.myAccount),1)]),_:1})],64)):(s(),d(E,{key:0},[n(C,{key:"mySessions",onClick:k[0]||(k[0]=m=>M())},{icon:l(()=>[n(t(Le))]),default:l(()=>[h(" "+i(v.mySessions),1)]),_:1}),n(C,{key:"myAccount",onClick:k[1]||(k[1]=m=>M())},{icon:l(()=>[n(t(he))]),default:l(()=>[h(" "+i(v.myAccount),1)]),_:1})],64))]),_:1},8,["selectedKeys"])]),_:1},8,["class","collapsed"]),[[Ve,!p.value]]),n(c,{class:"content"},{default:l(()=>[b("h1",ln,i(v[f.value[0]]||""),1),n(Y,{dashed:""}),t(fe)?(s(),d(E,{key:1},[f.value[0]==="manageSessions"?(s(),$(Va,{key:0})):I("",!0),f.value[0]==="manageConfig"?(s(),$(za,{key:1})):I("",!0),f.value[0]==="managePosts"?(s(),$(Ga,{key:2})):I("",!0),f.value[0]==="manageNodes"?(s(),$(tn,{key:3})):f.value[0]==="myAccount"?(s(),$($e,{key:4})):I("",!0)],64)):(s(),d(E,{key:0},[f.value[0]==="mySessions"?(s(),$(fa,{key:0})):f.value[0]==="myAccount"?(s(),$($e,{key:1})):I("",!0)],64))]),_:1}),n(o,{trigger:p.value,onClick:S},null,8,["trigger"])])}}}),vn=ue(sn,[["__scopeId","data-v-a4c86d27"]]);export{vn as default};
